generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_APP")
}

model Appointments_OPD {
  id               BigInt          @id
  patient_id       BigInt?
  report_id        BigInt
  doctor_id        Int?
  appointment_date DateTime        @db.Date
  appointment_time DateTime        @db.Time(0)
  appointment_type String?         @db.VarChar(10)
  status           String?         @db.VarChar(20)
  created_at       DateTime?       @default(now()) @db.Timestamp(0)
  updated_at       DateTime?       @default(now()) @db.Timestamp(0)
  Patients         Patients?       @relation(fields: [patient_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "appointments_opd_patient_id_foreign")
  report           report          @relation(fields: [report_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "appointments_opd_report_id_foreign")
  OPDTreatments    OPDTreatments[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model Billing {
  id             BigInt        @id
  patient_id     BigInt?
  treatment_id   BigInt
  type           String        @default("OPD") @db.VarChar(255)
  bill_date      DateTime      @db.Date
  total_amount   Decimal       @db.Decimal(10, 2)
  payment_status String?       @db.VarChar(20)
  created_at     DateTime?     @default(now()) @db.Timestamp(0)
  updated_at     DateTime?     @default(now()) @db.Timestamp(0)
  Patients       Patients?     @relation(fields: [patient_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "billing_patient_id_foreign")
  dailybill      dailybill[]
}

model DailyItemsList {
  id               BigInt        @id
  ipd_admission_id BigInt
  item_id          BigInt
  record_date      DateTime      @db.Date
  day_id           BigInt
  item_category    String        @db.VarChar(100)
  item_name        String        @db.VarChar(255)
  item_quantity    String?       @db.VarChar(50)
  item_cost        Decimal?      @db.Decimal(10, 2)
  dailybill_id     BigInt
  created_at       DateTime?     @default(now()) @db.Timestamp(0)
  updated_at       DateTime?     @default(now()) @db.Timestamp(0)
  dailybill        dailybill     @relation(fields: [dailybill_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "dailyitemslist_dailybill_id_foreign")
  DayItem          DayItem       @relation(fields: [day_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "dailyitemslist_day_id_foreign")
  IPDAdmissions    IPDAdmissions @relation(fields: [ipd_admission_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "dailyitemslist_ipd_admission_id_foreign")
  item             item          @relation(fields: [item_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "dailyitemslist_item_id_foreign")
}

model DayItem {
  id               BigInt           @id
  ipd_admission_id BigInt
  treatment_id     BigInt
  created_at       DateTime         @db.Timestamp(0)
  DailyItemsList   DailyItemsList[]
  IPDAdmissions    IPDAdmissions    @relation(fields: [ipd_admission_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "dayitem_ipd_admission_id_foreign")
  IPDTreatments    IPDTreatments    @relation(fields: [treatment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "dayitem_treatment_id_foreign")
  Ward             Ward[]
  dailybill        dailybill[]
}

model IPDAdmissions {
  id                                          BigInt           @id
  patient_id                                  BigInt?
  report_id                                   BigInt
  discharge_date                              DateTime?        @db.Date
  diagnosis                                   String?
  status                                      String?          @db.VarChar(20)
  created_at                                  DateTime?        @default(now()) @db.Timestamp(0)
  updated_at                                  DateTime?        @default(now()) @db.Timestamp(0)
  DailyItemsList                              DailyItemsList[]
  DayItem                                     DayItem[]
  Patients_IPDAdmissions_patient_idToPatients Patients?        @relation("IPDAdmissions_patient_idToPatients", fields: [patient_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ipdadmissions_patient_id_foreign")
  report                                      report           @relation(fields: [report_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ipdadmissions_report_id_foreign")
  IPDTreatments                               IPDTreatments[]
  IntakeOutput                                IntakeOutput[]
  Patients_Patients_idToIPDAdmissions         Patients?        @relation("Patients_idToIPDAdmissions")
  SurgeryRecords                              SurgeryRecords[]
  VitalSigns                                  VitalSigns[]
  Ward                                        Ward[]
}

model IPDTreatments {
  id                BigInt           @id
  petient_id        BigInt
  ipd_admission_id  BigInt?
  medication_id     BigInt @unique
  treatment_date    DateTime         @db.Date
  treatment_details String?
  created_at        DateTime?        @default(now()) @db.Timestamp(0)
  updated_at        DateTime?        @default(now()) @db.Timestamp(0)
  DayItem           DayItem[]
  IPDAdmissions     IPDAdmissions?   @relation(fields: [ipd_admission_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ipdtreatments_ipd_admission_id_foreign")
  Patients          Patients         @relation(fields: [petient_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ipdtreatments_petient_id_foreign")
  IntakeOutput      IntakeOutput[]
  MedicalReports    MedicalReports[]
  PatientMedication PatientMedication  @relation(fields: [medication_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  SurgeryRecords    SurgeryRecords[]
  VitalSigns        VitalSigns[]
  Ward              Ward[]
  notes             notes[]
}

model IntakeOutput {
  id               BigInt         @id
  ipd_admission_id BigInt?
  treatment_id     BigInt
  record_date      DateTime       @db.Date
  intake_time      Int?
  intake_nature    Int?
  intake_amount    Int?
  intake_total     Decimal?       @db.Decimal(8, 2)
  output_time      Int?
  output_nature    Int?
  output_amount    Int?
  output_total     Decimal?       @db.Decimal(8, 2)
  created_at       DateTime?      @default(now()) @db.Timestamp(0)
  updated_at       DateTime?      @default(now()) @db.Timestamp(0)
  IPDAdmissions    IPDAdmissions? @relation(fields: [ipd_admission_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "intakeoutput_ipd_admission_id_foreign")
  IPDTreatments    IPDTreatments  @relation(fields: [treatment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "intakeoutput_treatment_id_foreign")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model LabReports {
  id                BigInt              @id
  patient_id        BigInt?
  treatment_id      BigInt
  doctor_id         BigInt?
  test_name         String?             @db.VarChar(255)
  test_date         DateTime?           @db.Date
  type              String              @default("OPD") @db.VarChar(255)
  test_result       String?
  test_file         String?
  lab_technician    String?             @db.VarChar(255)
  status            String?             @db.VarChar(20)
  created_at        DateTime?           @default(now()) @db.Timestamp(0)
  updated_at        DateTime?           @default(now()) @db.Timestamp(0)
  Staff             Staff?              @relation(fields: [doctor_id], references: [Staff_id], onDelete: NoAction, onUpdate: NoAction, map: "labreports_doctor_id_foreign")
  Patients          Patients?           @relation(fields: [patient_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "labreports_patient_id_foreign")
  LabTestDetails    LabTestDetails[]
  TechnicianReports TechnicianReports[]
}
model PetientLabReports {
  id                BigInt              @id
  patient_id        BigInt?
  status            String?             @db.VarChar(20)
  created_at        DateTime?           @default(now()) @db.Timestamp(0)
  updated_at        DateTime?           @default(now()) @db.Timestamp(0)
}
model LabTestDetails {
  detail_id       BigInt      @id
  report_id       BigInt?
  parameter_name  String?     @db.VarChar(255)
  parameter_value String?     @db.VarChar(100)
  normal_range    String?     @db.VarChar(100)
  created_at      DateTime?   @default(now()) @db.Timestamp(0)
  updated_at      DateTime?   @default(now()) @db.Timestamp(0)
  LabReports      LabReports? @relation(fields: [report_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "labtestdetails_report_id_foreign")
}

model MedicalReports {
  report_id          BigInt          @id
  doctor_id          BigInt?
  treatment_id       BigInt?
  report_type        String?         @db.VarChar(255)
  report_description String?
  report_date        DateTime?       @db.Date
  report_file        String?
  status             String?         @db.VarChar(20)
  created_at         DateTime?       @default(now()) @db.Timestamp(0)
  updated_at         DateTime?       @default(now()) @db.Timestamp(0)
  Staff              Staff?          @relation(fields: [doctor_id], references: [Staff_id], onDelete: NoAction, onUpdate: NoAction, map: "medicalreports_doctor_id_foreign")
  IPDTreatments      IPDTreatments?  @relation(fields: [treatment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "medicalreports_treatment_id_foreign")
  ReportResults      ReportResults[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model Medications {
  id              BigInt           @id
  treatment_id    BigInt
  medicine_id     BigInt
  medication_name String           @db.VarChar(100)
  dosage          String?          @db.VarChar(50)
  frequency       String?          @db.VarChar(50)
  start_date      DateTime         @db.Date
  end_date        DateTime?        @db.Date
  instructions    String?
  created_at      DateTime?        @default(now()) @db.Timestamp(0)
  updated_at      DateTime?        @default(now()) @db.Timestamp(0)
 medication_list medication_list  @relation(fields: [medicine_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "medications_medicine_id_foreign")
 MainMedication MainMedication  @relation(fields: [treatment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "medications_treatment_id_foreign")
}
model MainMedication {
  id             BigInt      @id
  PatientMedication_id BigInt
  treatment_type  String      @db.VarChar(10) 
  doctor_id       BigInt?
  type            String           @default("OPD") @db.VarChar(255)
  description    String?     @db.VarChar(255)
  test_file       String?
  total_quantity   BigInt
  start_date     DateTime?   @db.Date
  end_date       DateTime?   @db.Date
  created_at      DateTime?        @default(now()) @db.Timestamp(0)
  updated_at      DateTime?        @default(now()) @db.Timestamp(0)
Staff Staff? @relation(fields: [doctor_id], references: [Staff_id],onDelete: NoAction, onUpdate: NoAction, map: "MainMedication_doctor_id_foreign")
PatientMedication PatientMedication @relation(fields: [PatientMedication_id], references: [id],onDelete: NoAction, onUpdate: NoAction, map: "MainMedication_PatientMedication_id_foreign")
Medications Medications[] 
}
model PatientMedication {
  id             BigInt      @id
  treatment_type  String      @db.VarChar(10) 
  doctor_id       BigInt?
  type            String           @default("OPD") @db.VarChar(255)
  description    String?     @db.VarChar(255)
  test_file       String?
  start_date     DateTime?   @db.Date
  end_date       DateTime?   @db.Date
  MainMedication  MainMedication[]
SurgeryRecords SurgeryRecords[] 

  OPDTreatments OPDTreatments?

  IPDTreatments IPDTreatments?
}
model OPDTreatments {
  id               BigInt            @id
  appointment_id   BigInt?
  patient_id       BigInt?
  doctor_id        BigInt?
  medication_id    BigInt @unique
  diagnosis        String?
  treatment_plan   String?
  report_file      String?
  follow_up_date   DateTime?         @db.Date
  created_at       DateTime?         @default(now()) @db.Timestamp(0)
  updated_at       DateTime?         @default(now()) @db.Timestamp(0)
PatientMedication PatientMedication  @relation(fields: [medication_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  Appointments_OPD Appointments_OPD? @relation(fields: [appointment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "opdtreatments_appointment_id_foreign")
  Staff            Staff?            @relation(fields: [doctor_id], references: [Staff_id], onDelete: NoAction, onUpdate: NoAction, map: "opdtreatments_doctor_id_foreign")
}

model Patients {
  id                                               BigInt             @id
  full_name                                        String             @db.VarChar(100)
  date_of_birth                                    DateTime           @db.Date
  gender                                           String             @db.VarChar(10)
  blood_group                                      String?            @db.VarChar(5)
  mobile_number                                    String             @unique @db.VarChar(15)
  address                                          String?
  email                                            String?            @unique @db.VarChar(100)
  created_at                                       DateTime?          @default(now()) @db.Timestamp(0)
  updated_at                                       DateTime?          @default(now()) @db.Timestamp(0)
  Appointments_OPD                                 Appointments_OPD[]
  Billing                                          Billing[]
  IPDAdmissions_IPDAdmissions_patient_idToPatients IPDAdmissions[]    @relation("IPDAdmissions_patient_idToPatients")
  IPDTreatments                                    IPDTreatments[]
  LabReports                                       LabReports[]
  IPDAdmissions_Patients_idToIPDAdmissions         IPDAdmissions      @relation("Patients_idToIPDAdmissions", fields: [id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "patients_id_foreign")
  SurgeryRecords                                   SurgeryRecords[]
  report                                           report[]
}

model ReportResults {
  result_id         BigInt          @id
  report_id         BigInt?
  observation_name  String?         @db.VarChar(255)
  observation_value String?
  created_at        DateTime?       @default(now()) @db.Timestamp(0)
  updated_at        DateTime?       @default(now()) @db.Timestamp(0)
  MedicalReports    MedicalReports? @relation(fields: [report_id], references: [report_id], onDelete: NoAction, onUpdate: NoAction, map: "reportresults_report_id_foreign")
}

model Setting {
  id           BigInt    @id
  domain       String?   @db.VarChar(500)
  icon         String?   @db.VarChar(500)
  hospital     String?   @db.VarChar(500)
  current_plan DateTime? @db.Date
  feature      String?   @db.VarChar(500)
  created_at   DateTime? @default(now()) @db.Timestamp(0)
  updated_at   DateTime? @default(now()) @db.Timestamp(0)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model Staff {
  Staff_id       BigInt           @id
  full_name      String           @db.VarChar(100)
  specialization String?          @db.VarChar(100)
  user           String?          @db.VarChar(200)
  password       String?          @db.VarChar(200)
  type           String           @default("doctor") @db.VarChar(255)
  contact_number String           @unique @db.VarChar(15)
  email          String?          @unique @db.VarChar(100)
  qualifications String?
  department     String?          @db.VarChar(100)
  created_at     DateTime?        @default(now()) @db.Timestamp(0)
  updated_at     DateTime?        @default(now()) @db.Timestamp(0)
  LabReports     LabReports[]
  MedicalReports MedicalReports[]
  MainMedications MainMedication[]
  OPDTreatments  OPDTreatments[]
  SurgeryRecords SurgeryRecords[]
  notes          notes[]
}

model SurgeryRecords {
  surgery_id               BigInt        @id
  patient_id               BigInt?
  treatment_id             BigInt
  ipd_admission_id         BigInt
  doctor_id                BigInt
  surgery_type             String        @db.VarChar(255)
  surgery_date             DateTime      @db.Date
  start_time               DateTime      @db.Time(0)
  end_time                 DateTime      @db.Time(0)
  operating_room           String?       @db.VarChar(50)
  team_members             BigInt
  anesthesia_type          String?       @db.VarChar(100)
  preop_diagnosis          String?
  postop_diagnosis         String?
  procedure_description    String?
  surgery_outcome          String?       @db.VarChar(100)
  complications            String?
  medication_id            BigInt
  medications_administered String?
  blood_loss               String?       @db.VarChar(50)
  implants_used            String?
  recovery_notes           String?
  created_at               DateTime?     @default(now()) @db.Timestamp(0)
  updated_at               DateTime?     @default(now()) @db.Timestamp(0)
  Staff                    Staff        @relation(fields: [doctor_id], references: [Staff_id], onDelete: NoAction, onUpdate: NoAction, map: "surgeryrecords_doctor_id_foreign")
  IPDAdmissions            IPDAdmissions @relation(fields: [ipd_admission_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "surgeryrecords_ipd_admission_id_foreign")
  PatientMedication          PatientMedication   @relation(fields: [medication_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "surgeryrecords_medication_id_foreign")
  Patients                 Patients?     @relation(fields: [patient_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "surgeryrecords_patient_id_foreign")
  IPDTreatments            IPDTreatments @relation(fields: [treatment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "surgeryrecords_treatment_id_foreign")
}

model TechnicianReports {
  technician_report_id BigInt      @id
  report_id            BigInt?
  technician_id        BigInt?
  technician_notes     String?
  created_at           DateTime?   @default(now()) @db.Timestamp(0)
  updated_at           DateTime?   @default(now()) @db.Timestamp(0)
  LabReports           LabReports? @relation(fields: [report_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "technicianreports_report_id_foreign")
}

model VitalSigns {
  record_id        BigInt         @id
  ipd_admission_id BigInt?
  treatment_id     BigInt
  record_date      DateTime       @db.Date
  spo2             Int?
  temperature      Int?
  blood_pressure   Int?
  pulse_rate       Int?
  respiratory_rate Int?
  created_at       DateTime?      @default(now()) @db.Timestamp(0)
  updated_at       DateTime?      @default(now()) @db.Timestamp(0)
  IPDAdmissions    IPDAdmissions? @relation(fields: [ipd_admission_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vitalsigns_ipd_admission_id_foreign")
  IPDTreatments    IPDTreatments  @relation(fields: [treatment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "vitalsigns_treatment_id_foreign")
}

model Ward {
  id               BigInt        @id
  dayitem_id       BigInt
  treatment_id     BigInt
  ipd_admission_id BigInt
  transfer_date    DateTime      @db.Date
  transfer_time    DateTime      @db.Time(0)
  ward             String        @db.VarChar(100)
  room             String        @db.VarChar(100)
  bed              String        @db.VarChar(100)
  cost             String        @db.VarChar(200)
  transfer_reason  String?
  created_at       DateTime?     @default(now()) @db.Timestamp(0)
  updated_at       DateTime?     @default(now()) @db.Timestamp(0)
  DayItem          DayItem       @relation(fields: [dayitem_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ward_dailycost_id_foreign")
  IPDAdmissions    IPDAdmissions @relation(fields: [ipd_admission_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ward_ipd_admission_id_foreign")
  IPDTreatments    IPDTreatments @relation(fields: [treatment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ward_treatment_id_foreign")
  dailybill        dailybill[]
}

model dailybill {
  id             BigInt           @id
  day            DateTime         @db.Date
  cost           BigInt
  finalbill_id   BigInt
  dailyCost_id   BigInt
  ward_id        BigInt
  created_at     DateTime         @db.Timestamp(0)
  DailyItemsList DailyItemsList[]
  DayItem        DayItem          @relation(fields: [dailyCost_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "dailybill_dailycost_id_foreign")
  Billing        Billing          @relation(fields: [finalbill_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "dailybill_finalbill_id_foreign")
  Ward           Ward             @relation(fields: [ward_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "dailybill_ward_id_foreign")
}

model item {
  id             BigInt           @id
  name           String           @db.VarChar(255)
  category       String           @db.VarChar(255)
  description    String
  cost           BigInt
  created_at     BigInt
  DailyItemsList DailyItemsList[]
}

model medication_list {
  id          BigInt        @id
  name        String        @db.VarChar(255)
  type        String        @db.VarChar(255)
  Medications Medications[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model notes {
  id            BigInt        @id
  user_id       BigInt
  type          String        @default("doctor") @db.VarChar(255)
  notes         String
  treatment_id  BigInt
  create_at     DateTime      @db.Timestamp(0)
  IPDTreatments IPDTreatments @relation(fields: [treatment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "notes_treatment_id_foreign")
  Staff         Staff         @relation(fields: [user_id], references: [Staff_id], onDelete: NoAction, onUpdate: NoAction, map: "notes_user_id_foreign")
}

model report {
  id               BigInt             @id 
  title            String
  department       String
  petient_id       BigInt
  created_at       DateTime           @db.Timestamp(0)
  Appointments_OPD Appointments_OPD[]
  IPDAdmissions    IPDAdmissions[]
  Patients         Patients           @relation(fields: [petient_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "report_petient_id_foreign")
}
